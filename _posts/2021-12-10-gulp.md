---
layout: post
author: Ghosts
title: gulp
excerpt: "gulp"
date: 2021-12-09T11:28:03.104Z
category:
- study
summary: study 
keywords: blog
thumbnail: "/assets/img/posts/study.jpg"
usemathjax: false
---



## gulp 
Gulp 는 웹 개발의 스트리밍 빌드 시스템, Node.js와 npm 기반의 Task Runner 이다. 반복 가능한 특정 작업을 자동화 하기 위해 사용한다. 작업은 .js 파일에 정의되고 작업 이름으로 작성된 명령으로 실행된다. 자동화는 모든 Javascript 파일, 정적 이미지의 축소 및 복사. 파일이 변경될 때 작업, bundle, 유닛 테스트 등의 작업을 수행할 수 있다고 한다.

  ![react](/assets/img/posts/gulp.png){:class="img-fluid"}


  ```shell
  $ npm install gulp-cli -g 
  $ npm init 
  $ npm install gulp -D 
  $ npx -p touch nodetouch gulpfile.js
  ```


  ```shell
  $ npm install gulp-sass -D 
  $ npm install gulp-sourcemaps -D
  ```

일단 작업공간을 만들어줄 필요가 있는데 나는 workspace라고 이름지어주겠다.
fonts, images, style, 각각 생성 하도록 한다.


  ![react](/assets/img/posts/gulp2.png){:class="img-fluid"}


패키지 설치가 완료되면 gulpfile.js 파일을 아래와 같이 수정


```javascript
var gulp = require('gulp'); var scss = require('gulp-sass'); 
var sourcemaps = require('gulp-sourcemaps'); 
// 소스 파일 경로 
var PATH = { 
    ASSETS: { 
        FONTS: './workspace/assets/fonts' 
        , IMAGES: './workspace/assets/images' 
        , STYLE: './workspace/assets/style'
    }
}, // 산출물 경로 
DEST_PATH = { 
    ASSETS: { 
        FONTS: './dist/assets/fonts' 
        , IMAGES: './dist/assets/images' 
        , STYLE: './dist/assets/style' 
    } 
}; gulp.task( 'scss:compile', () => { 
    return new Promise( resolve => {
         var options = { 
             outputStyle: "nested" // nested, expanded, compact, compressed 
             , indentType: "space" // space, tab , indentWidth: 4 // , precision: 8 
             , sourceComments: true // 코멘트 제거 여부 
            }; 
            gulp.src( 
                PATH.ASSETS.STYLE + '/*.scss' ) 
                .pipe( sourcemaps.init() ) 
                .pipe( scss(options) ) 
                .pipe( sourcemaps.write() ) 
                .pipe( gulp.dest( DEST_PATH.ASSETS.STYLE ) 
                ); 
        resolve(); 
    }); 
}); 
gulp.task( 'default', gulp.series(['scss:compile']));

```

간단하게 설명을 하자면 gulp의 업무를 하나하나 만들어내는데 사용되는 메서드는 task 라는 메서드다. 그래서 gulp.task() 라고 입력을 하면 업무가 하나 생성되는데 첫번째 파라미터로 업무의 이름, 두번째는 업무의 내용이다. 업무의 내용으로 비동기 방식의 Promise객체를 반환하는 함수를 넣어주면 된다.

gulp의 플러그인 중에 sass, scss를 컴파일 해주는 'gulp-sass'를 설치하고 위와 같이 적용하면 된다. 중간에 sourcemaps 를 추가해줬는데 이는 scss를 크롬에서 디버깅하도록 만들어준다.

